{"version":3,"file":"zatukurl.min.js","sources":["../src/zatukurl.js"],"sourcesContent":["M.zatuk_url = {};\n\nM.zatuk_url.init = function(Y, options) {\n    require(['jquery', 'mod_zatuk/messagemodal', 'core/str'], function($, messagemodal, Str){\n       let MessageModal = new messagemodal();\n        options.formcallback = M.zatuk_url.callback;\n        if(typeof(options.client_id) == 'undefined'){\n            MessageModal.confirmbox(Str.get_string('enablezatuk','mod_zatuk'));\n        }\n        if (!M.core_filepicker.instances[options.client_id]) {\n            M.core_filepicker.init(Y, options);\n        }\n        Y.on('click', function(e, client_id) {\n            e.preventDefault();\n            M.core_filepicker.instances[client_id].show();\n        }, '#filepicker-button-js-'+options.client_id, null, options.client_id);\n    });\n};\n\nM.zatuk_url.callback = function (params) {\n    require(['media_videojs/video-lazy', 'jquery'], function(videojs, $){\n        var videoparams = params.url.split('/');\n        var videoidIndex = videoparams.length-2;\n        $('#zatuk_external_url').val(params.url);\n        $('#zatuk_external_videoid').val(videoparams[videoidIndex]);\n        $('.zatuk_file_selector').show();\n        const player = videojs('mod_zatuk_form_video');\n        player.src({\n            autoplay:true,\n            src: params.url,\n            type: 'application/x-mpegURL'\n        });\n       player.on('loadedmetadata', function() {\n         $('#zatuk_duration').val(player.duration().toFixed(0));\n        });\n    });\n};\n"],"names":["M","zatuk_url","init","Y","options","require","$","messagemodal","Str","MessageModal","formcallback","callback","client_id","confirmbox","get_string","core_filepicker","instances","on","e","preventDefault","show","params","videojs","videoparams","url","split","videoidIndex","length","val","player","src","autoplay","type","duration","toFixed"],"mappings":"AAAAA,EAAEC,UAAY,GAEdD,EAAEC,UAAUC,KAAO,SAASC,EAAGC,SAC3BC,QAAQ,CAAC,SAAU,yBAA0B,aAAa,SAASC,EAAGC,aAAcC,SAC7EC,aAAe,IAAIF,aACtBH,QAAQM,aAAeV,EAAEC,UAAUU,cACH,IAAtBP,QAAQQ,WACdH,aAAaI,WAAWL,IAAIM,WAAW,cAAc,cAEpDd,EAAEe,gBAAgBC,UAAUZ,QAAQQ,YACrCZ,EAAEe,gBAAgBb,KAAKC,EAAGC,SAE9BD,EAAEc,GAAG,SAAS,SAASC,EAAGN,WACtBM,EAAEC,iBACFnB,EAAEe,gBAAgBC,UAAUJ,WAAWQ,SACxC,yBAAyBhB,QAAQQ,UAAW,KAAMR,QAAQQ,eAIrEZ,EAAEC,UAAUU,SAAW,SAAUU,QAC7BhB,QAAQ,CAAC,2BAA4B,WAAW,SAASiB,QAAShB,OAC1DiB,YAAcF,OAAOG,IAAIC,MAAM,KAC/BC,aAAeH,YAAYI,OAAO,EACtCrB,EAAE,uBAAuBsB,IAAIP,OAAOG,KACpClB,EAAE,2BAA2BsB,IAAIL,YAAYG,eAC7CpB,EAAE,wBAAwBc,aACpBS,OAASP,QAAQ,wBACvBO,OAAOC,IAAI,CACPC,UAAS,EACTD,IAAKT,OAAOG,IACZQ,KAAM,0BAEXH,OAAOZ,GAAG,kBAAkB,WAC1BX,EAAE,mBAAmBsB,IAAIC,OAAOI,WAAWC,QAAQ"}