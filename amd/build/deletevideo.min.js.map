{"version":3,"file":"deletevideo.min.js","sources":["../src/deletevideo.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This file is having the functionality for deletevideo and publish video.\n *\n * @copyright  2023 Moodle India\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {get_string as getString} from 'core/str';\nimport ModalSaveCancel from 'core/modal_save_cancel';\nimport Ajax from 'core/ajax';\nimport ModalEvents from 'core/modal_events';\nimport Templates from 'core/templates';\nimport messagemodal from 'mod_zatuk/messagemodal';\nconst Selectors = {\n    actions: {\n        deletevideo: '[data-action=\"deletevideo\"]',\n        movetozatuk: '[data-action=\"movetozatuk\"]',\n    },\n};\nlet MessageModal = new messagemodal();\nexport const init = () => {\n    document.addEventListener('click', function(e) {\n        e.stopImmediatePropagation();\n        let deletevideo = e.target.closest(Selectors.actions.deletevideo);\n        if (deletevideo) {\n            const id = deletevideo.getAttribute('data-id');\n                const deleteVideo = async () => {\n                const modal = await ModalSaveCancel.create({\n                    title: getString('deletevideo', 'mod_zatuk'),\n                    body: getString('deleteconfirm', 'mod_zatuk')\n                });\n                modal.show();\n                modal.getRoot().on(ModalEvents.save, (e) => {\n                    e.preventDefault();\n                    Templates.render('mod_zatuk/loader', {}).then(({html, js}) => {\n                        Templates.appendNodeContents('.modal-content', html, js);\n                    });\n                    var params = {};\n                    params.id = id;\n                    var promise = Ajax.call([{\n                        methodname: 'mod_zatuk_delete_video',\n                        args: params\n                    }]);\n                    promise[0].done(function() {\n                        getString('videodeleted' ,'mod_zatuk').then((str) => {\n                          MessageModal.confirmbox(getString('finalzatuksmessage','mod_zatuk',str));\n                        });\n                        setTimeout(function() {\n                            window.location.reload();\n                        },3500);\n                    }).fail(function() {\n                    });\n                });\n            };\n          deleteVideo();\n        }\n\n        let movetozatuk = e.target.closest(Selectors.actions. movetozatuk);\n        if (movetozatuk) {\n            const id = movetozatuk.getAttribute('data-id');\n            const publishZatukVideoo = async () => {\n                const modal = await ModalSaveCancel.create({\n                    title: getString('movetozatuk', 'mod_zatuk'),\n                    body: getString('movetozatukconfirm', 'mod_zatuk')\n                });\n                modal.show();\n                modal.getRoot().on(ModalEvents.save, (e) => {\n                    e.preventDefault();\n                    Templates.render('mod_zatuk/loader', {}).then(({html, js}) => {\n                        Templates.appendNodeContents('.modal-content', html, js);\n                    });\n                    var params = {};\n                    params.id = id;\n                    var promise = Ajax.call([{\n                        methodname: 'mod_zatuk_move_to_zatuk',\n                        args: params\n                    }]);\n                    promise[0].done(function() {\n                        getString('publishedtoserver' ,'mod_zatuk').then((str) => {\n                          MessageModal.confirmbox(getString('finalzatuksmessage','mod_zatuk',str));\n                        });\n                        setTimeout(function() {\n                            window.location.reload();\n                        },3500);\n                    }).fail(function() {\n                    });\n                });\n            };\n          publishZatukVideoo();\n        }\n    });\n};\n"],"names":["Selectors","deletevideo","movetozatuk","MessageModal","messagemodal","document","addEventListener","e","stopImmediatePropagation","target","closest","id","getAttribute","deleteVideo","async","modal","ModalSaveCancel","create","title","body","show","getRoot","on","ModalEvents","save","preventDefault","render","then","_ref","html","js","appendNodeContents","params","Ajax","call","methodname","args","done","str","confirmbox","setTimeout","window","location","reload","fail","publishZatukVideoo","_ref2"],"mappings":";;;;;;gVA2BMA,kBACO,CACLC,YAAa,8BACbC,YAAa,mCAGjBC,aAAe,IAAIC,oCACH,KAChBC,SAASC,iBAAiB,SAAS,SAASC,GACxCA,EAAEC,+BACEP,YAAcM,EAAEE,OAAOC,QAAQV,kBAAkBC,gBACjDA,YAAa,OACPU,GAAKV,YAAYW,aAAa,WAC1BC,YAAcC,gBACdC,YAAcC,2BAAgBC,OAAO,CACvCC,OAAO,mBAAU,cAAe,aAChCC,MAAM,mBAAU,gBAAiB,eAErCJ,MAAMK,OACNL,MAAMM,UAAUC,GAAGC,sBAAYC,MAAOjB,IAClCA,EAAEkB,oCACQC,OAAO,mBAAoB,IAAIC,MAAKC,WAACC,KAACA,KAADC,GAAOA,4BACxCC,mBAAmB,iBAAkBF,KAAMC,WAErDE,OAAS,GACbA,OAAOrB,GAAKA,GACEsB,cAAKC,KAAK,CAAC,CACrBC,WAAY,yBACZC,KAAMJ,UAEF,GAAGK,MAAK,+BACF,eAAgB,aAAaV,MAAMW,MAC3CnC,aAAaoC,YAAW,mBAAU,qBAAqB,YAAYD,SAErEE,YAAW,WACPC,OAAOC,SAASC,WAClB,SACHC,MAAK,mBAIlB/B,kBAGEX,YAAcK,EAAEE,OAAOC,QAAQV,kBAAmBE,gBAClDA,YAAa,OACPS,GAAKT,YAAYU,aAAa,WAC9BiC,mBAAqB/B,gBACjBC,YAAcC,2BAAgBC,OAAO,CACvCC,OAAO,mBAAU,cAAe,aAChCC,MAAM,mBAAU,qBAAsB,eAE1CJ,MAAMK,OACNL,MAAMM,UAAUC,GAAGC,sBAAYC,MAAOjB,IAClCA,EAAEkB,oCACQC,OAAO,mBAAoB,IAAIC,MAAKmB,YAACjB,KAACA,KAADC,GAAOA,6BACxCC,mBAAmB,iBAAkBF,KAAMC,WAErDE,OAAS,GACbA,OAAOrB,GAAKA,GACEsB,cAAKC,KAAK,CAAC,CACrBC,WAAY,0BACZC,KAAMJ,UAEF,GAAGK,MAAK,+BACF,oBAAqB,aAAaV,MAAMW,MAChDnC,aAAaoC,YAAW,mBAAU,qBAAqB,YAAYD,SAErEE,YAAW,WACPC,OAAOC,SAASC,WAClB,SACHC,MAAK,mBAIlBC"}