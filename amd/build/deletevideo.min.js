define("mod_zatuk/deletevideo",["exports","core/str","core/modal_factory","core/ajax","core/modal_events","core/templates","mod_zatuk/messagemodal"],(function(_exports,_str,_modal_factory,_ajax,_modal_events,_templates,_messagemodal){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * This file is having the functionality for deletevideo and publish video.
   *
   * @copyright  2023 Moodle India
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_ajax=_interopRequireDefault(_ajax),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates),_messagemodal=_interopRequireDefault(_messagemodal);const Selectors_actions={deletevideo:'[data-action="deletevideo"]',movetozatuk:'[data-action="movetozatuk"]'};let MessageModal=new _messagemodal.default;_exports.init=()=>{document.addEventListener("click",(function(e){e.stopImmediatePropagation();let deletevideo=e.target.closest(Selectors_actions.deletevideo);if(deletevideo){const id=deletevideo.getAttribute("data-id");_modal_factory.default.create({title:(0,_str.get_string)("deletevideo","mod_zatuk"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("deleteconfirm","mod_zatuk")}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("delete")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault(),_templates.default.renderForPromise("mod_zatuk/loader",{}).then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents(".modal-content",html,js)}));var params={};params.id=id,_ajax.default.call([{methodname:"mod_zatuk_delete_video",args:params}])[0].done((function(){(0,_str.get_string)("videodeleted","mod_zatuk").then((str=>{MessageModal.confirmbox((0,_str.get_string)("finalzatuksmessage","mod_zatuk",str))})),setTimeout((function(){window.location.reload()}),3500)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}let movetozatuk=e.target.closest(Selectors_actions.movetozatuk);if(movetozatuk){const id=movetozatuk.getAttribute("data-id");_modal_factory.default.create({title:(0,_str.get_string)("movetozatuk","mod_zatuk"),type:_modal_factory.default.types.SAVE_CANCEL,body:(0,_str.get_string)("movetozatukconfirm","mod_zatuk")}).done(function(modal){this.modal=modal,modal.setSaveButtonText((0,_str.get_string)("movetozatuk","mod_zatuk")),modal.getRoot().on(_modal_events.default.save,function(e){e.preventDefault(),_templates.default.renderForPromise("mod_zatuk/loader",{}).then((_ref2=>{let{html:html,js:js}=_ref2;_templates.default.appendNodeContents(".modal-content",html,js)}));var params={};params.id=id,_ajax.default.call([{methodname:"mod_zatuk_move_to_zatuk",args:params}])[0].done((function(){(0,_str.get_string)("publishedtoserver","mod_zatuk").then((str=>{MessageModal.confirmbox((0,_str.get_string)("finalzatuksmessage","mod_zatuk",str))})),setTimeout((function(){window.location.reload()}),3500)})).fail((function(){}))}.bind(this)),modal.show()}.bind(this))}}))}}));

//# sourceMappingURL=deletevideo.min.js.map