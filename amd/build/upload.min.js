define("mod_zatuk/upload",["exports","core_form/modalform","core/str","mod_zatuk/messagemodal"],(function(_exports,_modalform,_str,_messagemodal){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * This file is haveing the functionality for video upload.
   *
   * @copyright  2023 Moodle India
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_messagemodal=_interopRequireDefault(_messagemodal);const Selectors_actions={uploadvideo:'[data-action="uploadvideo"]'};let MessageModal=new _messagemodal.default;_exports.init=()=>{document.addEventListener("click",(function(e){let uploadvideo=e.target.closest(Selectors_actions.uploadvideo);if(uploadvideo){e.stopImmediatePropagation();const zatukrepositorystatus=uploadvideo.getAttribute("data-zatukrepoenabled"),zatukid=uploadvideo.getAttribute("data-id");if(1==zatukrepositorystatus){const title=uploadvideo.getAttribute("data-id")?(0,_str.get_string)("uploadvideo","mod_zatuk",uploadvideo.getAttribute("data-name")):(0,_str.get_string)("uploadvideo","mod_zatuk"),form=new _modalform.default({formClass:"mod_zatuk\\form\\upload",args:{id:zatukid},modalConfig:{title:title},returnFocus:uploadvideo});form.addEventListener(form.events.FORM_SUBMITTED,(()=>window.location.reload())),form.addEventListener(form.events.FORM_SUBMITTED,(event=>{if(event.preventDefault(),zatukid)var messageString=(0,_str.get_string)("videoupdated","mod_zatuk");else messageString=(0,_str.get_string)("videouploaded","mod_zatuk");messageString.then((str=>{MessageModal.confirmbox((0,_str.get_string)("finalzatuksmessage","mod_zatuk",str))})),setTimeout((function(){window.location.reload()}),3500)})),form.show()}else(0,_str.get_string)("enablezatuk","mod_zatuk").then((str=>{MessageModal.confirmbox((0,_str.get_string)("finalzatuksmessage","mod_zatuk",str))}))}}))}}));

//# sourceMappingURL=upload.min.js.map