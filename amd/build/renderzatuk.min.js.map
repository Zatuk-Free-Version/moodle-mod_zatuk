{"version":3,"file":"renderzatuk.min.js","sources":["../src/renderzatuk.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Defines video render script.\n *\n * @copyright  2023 Moodle India\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'media_videojs/video-lazy',\n        'core/modal_events',\n        'core/modal_factory',\n        'core/templates'\n        ], function($,\n        videojs,\n        ModalEvents,\n        ModalFactory,\n        Templates) {\n    return {\n        init: function() {\n          $(document).on('click', '.renderervideo', function(){\n            var data = $(this).data();\n            ModalFactory.create({\n                title: data.title,\n                type: ModalFactory.types.DEFAULT,\n                body: Templates.render('mod_zatuk/preview_block', data),\n            }).done(function(modal) {\n                modal.show();\n                modal.getRoot().on(ModalEvents.shown, function(){\n                    const player = videojs('rendervideo_'+data.id);\n                    player.src({\n                        autoplay:true,\n                        src: data.zatukurl,\n                        type: 'application/x-mpegURL'\n                    });\n                    player.on('loadedmetadata', function() {\n                       $('#zatuk_duration').val(player.duration().toFixed(0));\n                    });\n                });\n                modal.getRoot().on(ModalEvents.hidden, function(){\n                    var currentVideo = videojs('rendervideo_'+data.id);\n                    currentVideo.dispose();\n                });\n            }.bind(this));\n          });\n\n        }\n    };\n});\n"],"names":["define","$","videojs","ModalEvents","ModalFactory","Templates","init","document","on","data","this","create","title","type","types","DEFAULT","body","render","done","modal","show","getRoot","shown","player","id","src","autoplay","zatukurl","val","duration","toFixed","hidden","dispose","bind"],"mappings":";;;;;;AAqBAA,+BAAO,CAAC,SACA,2BACA,oBACA,qBACA,mBACG,SAASC,EACZC,QACAC,YACAC,aACAC,iBACG,CACHC,KAAM,WACJL,EAAEM,UAAUC,GAAG,QAAS,kBAAkB,eACpCC,KAAOR,EAAES,MAAMD,OACnBL,aAAaO,OAAO,CAChBC,MAAOH,KAAKG,MACZC,KAAMT,aAAaU,MAAMC,QACzBC,KAAMX,UAAUY,OAAO,0BAA2BR,QACnDS,KAAK,SAASC,OACbA,MAAMC,OACND,MAAME,UAAUb,GAAGL,YAAYmB,OAAO,iBAC5BC,OAASrB,QAAQ,eAAeO,KAAKe,IAC3CD,OAAOE,IAAI,CACPC,UAAS,EACTD,IAAKhB,KAAKkB,SACVd,KAAM,0BAEVU,OAAOf,GAAG,kBAAkB,WACzBP,EAAE,mBAAmB2B,IAAIL,OAAOM,WAAWC,QAAQ,UAG1DX,MAAME,UAAUb,GAAGL,YAAY4B,QAAQ,WAChB7B,QAAQ,eAAeO,KAAKe,IAClCQ,cAEnBC,KAAKvB"}